\RequirePackage{tikz}

\tikzset{sigshift/.style={}}
\newcommand*\signature[2][]{\def\@signature{#2}\tikzset{sigshift/.style={#1}}}

\def\@signarea{\def\lw{1.1pt}%
	\tikzset{inline/.style={inner sep=0pt,outer sep=0pt},
	lcr/.style={line cap=round},lw/.style={line width=\lw},
	name/.style={anchor=north west,inline,yshift=-5pt},
	content/.style={anchor=base west,baseline,inline,yshift=\lw/2+.5pt}}%
	\begin{minipage}[b]{.5\textwidth-5mm}
		\begin{tikzpicture}
			\draw[lcr,lw] (0,0) -- (\textwidth,0);
			\node[name] at (0,0) {\strut Location, Date};
		\end{tikzpicture}
	\end{minipage}\hfill
	\begin{minipage}[b]{.5\textwidth-5mm}
		\begin{tikzpicture}
			\draw[lcr,lw] (0,0) -- (\textwidth,0);
			\node[name] at (0,0) {\strut\@author};
			\@ifundefined{@signature}{}{\node[content,sigshift] at (0,0) {\includegraphics[width=4cm]{\@signature}};}
		\end{tikzpicture}
	\end{minipage}
}
\def\@sigskip{\vskip32.0pt plus 7.0pt minus 7.0pt}

\newenvironment{declarationofauthenticity}
	{\cleardoublepage\begingroup\section*{\translate{authenticity}}}
	{\par\@sigskip\@signarea\thesis@voidpar\endgroup\bigskip\thesis@voidpar}

\def\makedeclarationofauthenticity{\begin{declarationofauthenticity}
	I, \@author, hereby declare that this master thesis is my own unaided work. All
	direct or indirect sources used are acknowledged and referenced. This master thesis
	was not previously presented to another examination board and has not been published
	as of yet.
\end{declarationofauthenticity}}
